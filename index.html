<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>coq_proof_sem_eq_de_op</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Coq Proof for denotational and operational semantics equivalence on a formal interaction language for modelling distributed systems</h1>

Erwan Mahe - 2021

<div class="paragraph"> </div>

We use Coq to:
<ul class="doclist">
<li> formally encode an Interaction Language for modelling the behavior of distributed systems

</li>
<li> define a formal semantics in denotational style on this language

</li>
<li> define another formal semantics, this time in operational style

</li>
<li> prove the equivalence of those two semantics

</li>
</ul>

<div class="paragraph"> </div>

This proof accompanies the manuscript of my thesis

<div class="paragraph"> </div>

The coq file itself is hosted on the following repository:
<ul class="doclist">
<li> <a href="https://github.com/erwanM974/coq_hibou_label_semantics_equivalence">https://github.com/erwanM974/coq_hibou_label_semantics_equivalence</a> 

</li>
</ul>

<div class="paragraph"> </div>

A prototype tool, which implements some model-based-testing features using the operational-style semantics
is available on the following repository:
<ul class="doclist">
<li> <a href="https://github.com/erwanM974/hibou_label">https://github.com/erwanM974/hibou_label</a> 

</li>
</ul>

<div class="paragraph"> </div>

Another Coq proof, that is interested in the handling of sets of locally observed traces (multi-traces)
and how one can test them w.r.t. the semantics (the Oracle problem for some form of a trace conformance relation / membership)
is available on the following repository:
<ul class="doclist">
<li> <a href="https://github.com/erwanM974/coq_hibou_label_multi_trace_analysis">https://github.com/erwanM974/coq_hibou_label_multi_trace_analysis</a> 

</li>
</ul>

<div class="paragraph"> </div>

<a id="lab2"></a><h2 class="section">Context</h2>


<div class="paragraph"> </div>

This formal semantics defines which are the behaviors that are specified by an interaction model 
(akin to Message Sequence Charts or UML Sequence Diagrams).
Those behaviors are described by traces which are sequences of atomic actions that can be observed 
on the interfaces of a distributed system's sub-systems.
Those atomic actions correspond to the occurence of communication events i.e. either the emission or the reception of
a given message on a given sub-system.

<div class="paragraph"> </div>

The definition of formal semantics on this interaction language is done here in two different styles:
<ul class="doclist">
<li> a <i>denotational-style</i>, which consists in constructing sets of accepted traces by <i>composition</i> and using algebraic properties of some operators on sets of traces

</li>
<li> an <i>operational-style</i>, which consists in considering which actions can be immediately executed in a given interaction, constructing the interaction term that remains to be executed via term rewriting, and constructing the semantics using <i>recursion</i> on the semantics of those remaining interactions

</li>
</ul>

<div class="paragraph"> </div>

<a id="lab3"></a><h2 class="section">Dependencies</h2>

Below are listed the libraries required for this Coq proof.
<ul class="doclist">
<li> "Coq.Lists.List." provides utilities on lists. I use lists - among other things - to represent traces.

</li>
<li> "Coq.Vectors.Fin." provides a means to represent finite sets indexed by {1,...,n}.

</li>
<li> "Psatz." is required for using the "lia" tactic to solve simple arithemtic problems.

</li>
<li> "Coq.Program.Equality." is required for using the "dependent induction" tactic with "generalizing", allowing the generalisation of some variables of the problem in the induction hypothesis.

</li>
<li> "Coq.Init.Logic." for (among other things) the "not_eq_sym" theorem

</li>
<li> "Coq.Init.Nat.", "Coq.Arith.PeanoNat." and "Coq.Arith.Peano_dec." for the manipulation of natural integers and the use of some lemmas

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Lists.List</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="var">Coq.Vectors.Fin</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Psatz</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Program.Equality</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Init.Logic</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Init.Nat</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Arith.PeanoNat</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Coq.Arith.Peano_dec</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab4"></a><h1 class="section">Preliminaries</h1>


<div class="paragraph"> </div>

This section is dedicated to enoncing some basic types and properties on which the remainder of the proof will be based.

<div class="paragraph"> </div>

<a id="lab5"></a><h2 class="section">Basic Properties</h2>


<div class="paragraph"> </div>

Let us start by stating some basic properties on integers and lists that will be usefull in the remainder of the proof:
<ul class="doclist">
<li> "eq_or_not_eq_nat" corresponds to the decidability of the equality for natural integers

</li>
<li> "non_empty_nat_is_succ" states that, if a natural integer is not zero then it has a predecessor

</li>
<li> "list_not_empty_is_cons" states that, if a list is not empty then it has a head and a tail

</li>
<li> "cons_eq_app" states that, if a list composed of a head and a tail is equal to the concatenation of two lists then either the first list is empty or it can be decomposed as the head and another tail

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_or_not_eq_nat</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) \/ (<span class="id" title="var">x</span>&lt;&gt;<span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">eq_nat_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">non_empty_nat_is_succ</span> (<span class="id" title="var">x</span>:<span class="id" title="var">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> &lt;&gt; 0)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>:<span class="id" title="var">nat</span>, <span class="id" title="var">x</span> = <span class="id" title="var">S</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>.<br/>
- <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_not_empty_is_cons</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :<br/>
&nbsp;(<span class="id" title="var">l</span>&lt;&gt;<span class="id" title="var">nil</span>) -&gt; (<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">l</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">l'</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>.<br/>
- <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">cons_eq_app</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">a</span> :: <span class="id" title="var">l</span> = <span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( (<span class="id" title="var">l1</span> = <span class="id" title="var">nil</span> /\ <span class="id" title="var">l2</span> = <span class="id" title="var">a</span>::<span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id" title="tactic">exists</span> (<span class="id" title="var">l1'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">l1</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">l1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h2 class="section">Substitutions and eliminations of elements in lists</h2>


<div class="paragraph"> </div>

In the following, I define some functions to manipulate lists. 
To do so, I use Fixpoints and as a result those functions are checked by Coq's termination checker.

<div class="paragraph"> </div>

<ul class="doclist">
<li> "list_replace_nth" replaces the "n-th" element of a list by another element

</li>
<li> "list_remove_nth" removes the "n-th" element of a list

</li>
</ul>

<div class="paragraph"> </div>

Some tests (defined as Lemmas) ascertain the effect of those functions

<div class="paragraph"> </div>

The "list_remove_keep_in" Lemma states that, if one were to find an element "x" in a list
resulting from the removal of another element, then this "x" element must also be in the original list.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">list_replace_nth</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">l</span>} : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">e</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">x</span> :: <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">other</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, <span class="id" title="var">e</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">e</span> :: (<span class="id" title="var">list_replace_nth</span> <span class="id" title="var">A</span> <span class="id" title="var">m</span> <span class="id" title="var">l'</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">test_list_replace_nth_1</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">list_replace_nth</span> <span class="id" title="var">nat</span> 0 (12::<span class="id" title="var">nil</span>) 1 = 1::<span class="id" title="var">nil</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">test_list_replace_nth_2</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">list_replace_nth</span> <span class="id" title="var">nat</span> 1 (12::13::<span class="id" title="var">nil</span>) 1 = 12::1::<span class="id" title="var">nil</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">list_remove_nth</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">l</span>} : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">e</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">other</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, <span class="id" title="var">e</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">e</span> :: (<span class="id" title="var">list_remove_nth</span> <span class="id" title="var">A</span> <span class="id" title="var">m</span> <span class="id" title="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">test_list_remove_nth_1</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">list_remove_nth</span> <span class="id" title="var">nat</span> 0 (12::<span class="id" title="var">nil</span>) = <span class="id" title="var">nil</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">test_list_remove_nth_2</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">list_remove_nth</span> <span class="id" title="var">nat</span> 1 (12::13::<span class="id" title="var">nil</span>) = 12::<span class="id" title="var">nil</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_remove_keep_in</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">list_remove_nth</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">n</span>.<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">eq_nat_dec</span> <span class="id" title="var">n</span> 0).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">non_empty_nat_is_succ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab7"></a><h2 class="section">Signature &amp; Actions</h2>


<div class="paragraph"> </div>

The interaction language that I define depends on a signature that is composed of:
<ul class="doclist">
<li> a set of "lifelines" L, which elements represent the individual sub-systems that can be found in the disctributed system (or some groups of sub-systems via abstraction/refinement)

</li>
<li> a set of "messages" M, which elements represent the individual distinguishable messages that can be exchanged (via asynchronous communication) within (i.e. internally) or without (i.e externally) the distributed system 

</li>
</ul>

<div class="paragraph"> </div>

Given that I consider finitely many such lifelines and messages, I use finite vectors from "Coq.Vectors.Fin."
to model those sets.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Parameter</span> <span class="id" title="var">LCard</span> : <span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Parameter</span> <span class="id" title="var">MCard</span> : <span class="id" title="var">nat</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">L</span> := <span class="id" title="var">Fin.t</span> (<span class="id" title="var">S</span> <span class="id" title="var">LCard</span>).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">M</span> := <span class="id" title="var">Fin.t</span> (<span class="id" title="var">S</span> <span class="id" title="var">MCard</span>).<br/>

<br/>
</div>

<div class="doc">
To distinguish between emissions "a!m" and receptions "b?m" I encode the kind of action ({!,?}) with an inductive type "ActKind".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">ActKind</span> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;|<span class="id" title="var">ak_snd</span>:<span class="id" title="var">ActKind</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">ak_rcv</span>:<span class="id" title="var">ActKind</span>.<br/>

<br/>
</div>

<div class="doc">
I can now define actions with the "Action" type via a cartesian product of types L, ActKind and M.

<div class="paragraph"> </div>

A utility function "lifeline" returns, for any action, the lifeline on which it occurs.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Action</span> :<span class="id" title="keyword">Set</span>:= <span class="id" title="var">L</span>*<span class="id" title="var">ActKind</span>*<span class="id" title="var">M</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">lifeline</span>: <span class="id" title="var">Action</span> -&gt; <span class="id" title="var">L</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '(<span class="id" title="var">_</span> <span class="id" title="keyword">as</span> <span class="id" title="var">l</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>) =&gt; <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">exists_action_on_lifeline</span> (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>:<span class="id" title="var">Action</span>, <span class="id" title="var">l</span> = (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">Trace Language (Semantic Domain)</h1>


<div class="paragraph"> </div>

This section is dedicated to the semantic domain of our interaction language i.e. the domain of definition of its semantics.
After defining this domain, I will study the properties of this domain,
notably how one can manipulate its elements through some operators and which are the properties of those operators.

<div class="paragraph"> </div>

As hinted at ealier, in this modelling framework:
<ul class="doclist">
<li> it is the expected behavior of distributed systems that is modelled

</li>
<li> this behavior is expressed in terms of accepted traces i.e. sequences of atomic actions that may be expressed

</li>
</ul>

<div class="paragraph"> </div>

The semantic domain is therefore the universe of traces.

<div class="paragraph"> </div>

The "Trace" type is formally defined below as that of lists of actions ("Action" type).

<div class="paragraph"> </div>

Functions "list_replace_nth" and "subs_remove" that were defined above to replace and remove elements in generic lists
are aliased and specialised for use in lists of traces as "subs_replace" and "subs_remove"

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Trace</span> : <span class="id" title="keyword">Type</span> := <span class="id" title="var">list</span> <span class="id" title="var">Action</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab9"></a><h2 class="section">Some consideration on the decidability of equalities</h2>


<div class="paragraph"> </div>

In the following I construct the decidability of the equality of traces in several steps:
<ul class="doclist">
<li> in "eq_or_not_eq_actkind" is proven the decidability of the equality for the "ActKind" type. It is immediate given the inductive nature of "ActKind"

</li>
<li> in "eq_or_not_eq_action" is proven the decidability of the equality for the "Action" type. It relies on that of its subtypes L, ActKind and M. We have proven the decidability property for ActKind juste before, and, for L and M, it is provided by the "eq_dec" Lemma from "Coq.Vectors.Fin.". 

</li>
<li> finally, in "eq_or_not_eq_trace" it is proven for the "Trace" type

</li>
</ul>

<div class="paragraph"> </div>

This last proof relies on a custom induction principle defined and checked in the "double_trace_induction" Lemma.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_or_not_eq_actkind</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">ActKind</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) \/ (<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">y</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_or_not_eq_action</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">Action</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) \/ (<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Fin.eq_dec</span> <span class="id" title="var">m</span> <span class="id" title="var">m0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hm</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Fin.eq_dec</span> <span class="id" title="var">l</span> <span class="id" title="var">l0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hl</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">eq_or_not_eq_actkind</span> <span class="id" title="var">a</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Ha</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">e0</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">double_trace_induction</span> (<span class="id" title="var">P</span>: <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="keyword">Prop</span>):<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> <span class="id" title="var">nil</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">t</span>&lt;&gt;<span class="id" title="var">nil</span>) -&gt; ((<span class="id" title="var">P</span> <span class="id" title="var">t</span> <span class="id" title="var">nil</span>) /\ (<span class="id" title="var">P</span> <span class="id" title="var">nil</span> <span class="id" title="var">t</span>)) ) <br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="keyword">forall</span> (<span class="id" title="var">a1</span> <span class="id" title="var">a2</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>), <span class="id" title="var">P</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> -&gt; <span class="id" title="var">P</span> (<span class="id" title="var">a1</span>::<span class="id" title="var">t1</span>) (<span class="id" title="var">a2</span>::<span class="id" title="var">t2</span>) ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>), <span class="id" title="var">P</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span>.<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=(<span class="id" title="var">a</span>::<span class="id" title="var">t2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span>:=(<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_or_not_eq_trace</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) \/ (<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">double_trace_induction</span>.<br/>
<span class="id" title="tactic">specialize</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">P</span>:= (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">Trace</span> =&gt; (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) \/ (<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>))).<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">not_eq_sym</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">eq_or_not_eq_action</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As a side note, let us also remark the "not_eq_or_not_not_eq" Lemma on the decidability
of the unequality of lifelines, which will be usefull later. 
To prove it I use the "eq_dec" Lemma from "Coq.Vectors.Fin.".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">not_eq_or_not_not_eq</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>) \/ (<span class="id" title="var">not</span>(<span class="id" title="var">x</span>&lt;&gt;<span class="id" title="var">y</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Fin.eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab10"></a><h2 class="section">Some operators on traces and some of their algebraic properties</h2>


<div class="paragraph"> </div>

In the following let us focus on four operators on traces:
<ul class="doclist">
<li> the classical concatenation of lists "++" which is extended to traces:
<ul class="doclist">
<li> for any two traces t1 and t2, there is a single traces t such that t = t1 ++ t2

</li>
<li> this traces t is defined as the concatenation of t1 and t2 as a single contiguous list

</li>
</ul>

</li>
<li> an interleaving operator on traces
<ul class="doclist">
<li> for any two traces t1 and t2, there can exist may traces t such that (is_interleaving t1 t2 t)

</li>
<li> those traces correspond to potential interleavings of the actions from t1 and t2

</li>
<li> within such a t, one must find all the actions from t1 and all the actions from t2 in the order in which they are found in t1 and t2 respectively

</li>
<li> however actions from t1 can be put in any order w.r.t. the actions from t2 

</li>
</ul>

</li>
<li> a weak sequencing operator on traces:
<ul class="doclist">
<li> for any two traces t1 and t2, there can exist may traces t such that (is_weak_seq t1 t2 t)

</li>
<li> weak sequencing allows some interleaving between the actions from t1 and t2

</li>
<li> however it is a more restrictive operator than interleaving given that it onlt allows some interleavings and not all

</li>
<li> the definition of what is allowed or not is reliant upon a conflict operator

</li>
<li> in a certain prefix of the trace t:
<ul class="doclist">
<li> actions from t1 can be added freely

</li>
<li> actions from t2 can only be added if they do not enter into conflict with the actions from t1 that are waiting to be added

</li>
</ul>

</li>
<li> the notion of conflict correspond to the fact, for two actions, to occur on the same lifeline 

</li>
</ul>

</li>
<li> a special merge operator which merges an ordered list of traces into a single merged trace.

</li>
</ul>
I define this operator in such a way that is is configurable so as to act
as any of three different merge operators:
<ul class="doclist">
<li> the merging of traces using classical concatenation

</li>
<li> the merging of traces using the interleaving operator

</li>
<li> the merging of traces using the weak sequenceing operator

</li>
</ul>

<div class="paragraph"> </div>

In this section, those four operators will be defined (except for the concatenation which is already provided by Coq)
and some of their properties stated and proven.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab11"></a><h3 class="section">Concatenation</h3>


<div class="paragraph"> </div>

For the concatenation operator "++", most interesting properties are already shipped with Coq
and can be used in proofs more or less direclty (with "simpl.", "inversion." and so on).

<div class="paragraph"> </div>

We only define the following two properties:
<ul class="doclist">
<li> "concat_nil_prop0", which states that, for any traces t1 and t2, if t1++t2 is not the empty trace, then either t1 or t2 is not empty

</li>
<li> "concat_split", which states that, for any traces t1, t2 and t, if t1++t2=a::t and t1 is not the empty trace, then it means that t1 begins with a as a head and has a certain tail t3

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_nil_prop0</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">t1</span> ++ <span class="id" title="var">t2</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&lt;-&gt; ( (<span class="id" title="var">t1</span> &lt;&gt; <span class="id" title="var">nil</span>) \/ (<span class="id" title="var">t2</span> &lt;&gt; <span class="id" title="var">nil</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">eq_or_not_eq_trace</span> <span class="id" title="var">t1</span> <span class="id" title="var">nil</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H1</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">eq_or_not_eq_trace</span> <span class="id" title="var">t2</span> <span class="id" title="var">nil</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> ; <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">app_nil_r</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">app_eq_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_split</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;( (<span class="id" title="var">t1</span> ++ <span class="id" title="var">t2</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">t</span>) /\ (<span class="id" title="var">t1</span> &lt;&gt; <span class="id" title="var">nil</span>) )<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">t3</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">t1</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">t3</span>) /\ (<span class="id" title="var">t</span> = <span class="id" title="var">t3</span> ++ <span class="id" title="var">t2</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span>.<br/>
- <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab12"></a><h3 class="section">Interleaving</h3>


<div class="paragraph"> </div>

I formalise the interleaving operator in Coq using an inductive predicate 
"is_interleaving" such that
"(is_interleaving t1 t2 t)" states the membership of a given trace t
into the set of interleavings between traces t1 and t2.

<div class="paragraph"> </div>

This inductive predicate can be inferred inductively using four construction rules:
<ul class="doclist">
<li> "interleaving_nil_left" which states that for any trace t, t is an interleaving of the empty trace and t

</li>
<li> "interleaving_nil_right" which states that for any trace t, t is an interleaving of t and the empty trace

</li>
<li> "interleaving_cons_left" which states that for any interleaving t of traces t1 and t2, (a::t) is an interleaving of (a::t1) and t2

</li>
<li> "interleaving_cons_right" which states that for any interleaving t of traces t1 and t2, (a::t) is an interleaving of t1 and (a::t2)

</li>
</ul>

<div class="paragraph"> </div>

Those two last rules signify that, when constructing an interleaving, we can mix in actions from either traces in any order

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">is_interleaving</span> : <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
| <span class="id" title="var">interleaving_nil_left</span>   : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">nil</span> <span class="id" title="var">t</span> <span class="id" title="var">t</span>)<br/>
| <span class="id" title="var">interleaving_nil_right</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t</span> <span class="id" title="var">nil</span> <span class="id" title="var">t</span>)<br/>
| <span class="id" title="var">interleaving_cons_left</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>) -&gt; (<span class="id" title="var">is_interleaving</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>) <span class="id" title="var">t2</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>))<br/>
| <span class="id" title="var">interleaving_cons_right</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>) -&gt; (<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t2</span>) (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>)).<br/>

<br/>
</div>

<div class="doc">
Interesting properties of the "is_interleaving" that will be useful later on include:
<ul class="doclist">
<li> the guarantee of the existence of an interleaving t (at least one) for any traces t1 and t2 "is_interleaving_existence"

</li>
<li> "is_interleaving_nil_prop0" which is the same property as "concat_nil_prop0" but for the interleaving operator instead of the concatenation

</li>
<li> "is_interleaving_nil_prop1", which states that if the empty trace is an interleaving of t1 and t2, then both t1 and t2 must be empty

</li>
<li> "is_interleaving_nil_prop2", which states that if t is an interleaving of the empty trace and t2, then t=t2

</li>
<li> "is_interleaving_nil_prop3", which states that if t is an interleaving of t1 and the empty trace, then t=t1

</li>
<li> "is_interleaving_split" is a similar property as "concat_split" but for the interleaving operator instead of the concatenation
<ul class="doclist">
<li> let us also note that, given that interleavings are allowed, in contrast to ++, the head action "a" can be found in either t1 or t2 instead of uniquely t1

</li>
</ul>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_interleaving_existence</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>, <span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_left</span>.<br/>
- <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHt1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t2</span>:=<span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHt1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_cons_left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_interleaving_nil_prop0</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; ( (<span class="id" title="var">t1</span> &lt;&gt; <span class="id" title="var">nil</span>) \/ (<span class="id" title="var">t2</span> &lt;&gt; <span class="id" title="var">nil</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_interleaving_nil_prop1</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>: <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; ( (<span class="id" title="var">t1</span> = <span class="id" title="var">nil</span>) /\ (<span class="id" title="var">t2</span> = <span class="id" title="var">nil</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_interleaving_nil_prop2</span> (<span class="id" title="var">t</span> <span class="id" title="var">t2</span>: <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">nil</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">t2</span> = <span class="id" title="var">t</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">assert</span> (<span class="id" title="var">t2</span>=<span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_interleaving</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_interleaving_nil_prop3</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t</span>: <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">nil</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">t1</span> = <span class="id" title="var">t</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">assert</span> (<span class="id" title="var">t1</span>=<span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_interleaving</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_interleaving_split</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">t3</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">t2</span>=<span class="id" title="var">a</span>::<span class="id" title="var">t3</span>)/\(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t3</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id" title="tactic">exists</span> <span class="id" title="var">t3</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">t1</span>=<span class="id" title="var">a</span>::<span class="id" title="var">t3</span>)/\(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t3</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_left</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_right</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab13"></a><h3 class="section">Weak Sequencing</h3>


<div class="paragraph"> </div>

As explained earlier, the weak sequencing operator on traces relies upon a notion of "conflict" between actions.
To encode it in code, I define the "no_conflict" inductive predicate such that (no_conflict t a) 
states that there are not actions in t that occur on the same lifeline as action "a".

<div class="paragraph"> </div>

This predicate can be inferred inductively from the following two rules:
<ul class="doclist">
<li> "no_conflict_nil", which states that for any action "a", there can be no conflict between "a" and the empty trace

</li>
<li> "no_conflict_cons", which states that for any action "a" and trace (a'::t) which starts with action "a'" as its head, if "a" and "a'" occur on different lifelines and there is no conflict between "a" and "t" then there is no conflict between "a" and (a'::t)

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">no_conflict</span> : <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Action</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
| <span class="id" title="var">no_conflict_nil</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>), (<span class="id" title="var">no_conflict</span> <span class="id" title="var">nil</span> <span class="id" title="var">a</span>)<br/>
| <span class="id" title="var">no_conflict_cons</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> <span class="id" title="var">a'</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">not</span> ((<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) = (<span class="id" title="var">lifeline</span> <span class="id" title="var">a'</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; (<span class="id" title="var">no_conflict</span> (<span class="id" title="var">a'</span>::<span class="id" title="var">t</span>) <span class="id" title="var">a</span>).<br/>

<br/>
</div>

<div class="doc">
As for the interleaving, I formalise the weak sequencing operator in Coq using an inductive predicate 
"is_weak_seq" such that
"(is_weak_seq t1 t2 t)" states the membership of a given trace t
into the set of weakly sequenced traces between traces t1 and t2.

<div class="paragraph"> </div>

This inductive predicate can be inferred inductively using four construction rules:
<ul class="doclist">
<li> "weak_seq_nil_left" which states that for any trace t, t is a weak sequence of the empty trace and t

</li>
<li> "weak_seq_nil_right" which states that for any trace t, t is a weak sequence of t and the empty trace

</li>
<li> "weak_seq_cons_left" which states that for any weak sequence t of traces t1 and t2, (a::t) is a weak sequence of (a::t1) and t2

</li>
<li> "weak_seq_cons_right" which states that for any weak sequence t of traces t1 and t2, if there is no conflict between "a" and t1 then (a::t) is a weak sequence of t1 and (a::t2)

</li>
</ul>

<div class="paragraph"> </div>

Those two last rules signify that, when constructing a weak sequence:
<ul class="doclist">
<li> we can freely add actions from the left-hand side trace t1

</li>
<li> but we only allow the addition of events from t2 if they are not preempted by the occurence of events from t1

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">is_weak_seq</span> : <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
| <span class="id" title="var">weak_seq_nil_left</span>   : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">nil</span> <span class="id" title="var">t</span> <span class="id" title="var">t</span>)<br/>
| <span class="id" title="var">weak_seq_nil_right</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t</span> <span class="id" title="var">nil</span> <span class="id" title="var">t</span>)<br/>
| <span class="id" title="var">weak_seq_cons_left</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>) -&gt; (<span class="id" title="var">is_weak_seq</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>) <span class="id" title="var">t2</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>))<br/>
| <span class="id" title="var">weak_seq_cons_right</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">t</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t1</span> <span class="id" title="var">a</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t2</span>) (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>)).<br/>

<br/>
</div>

<div class="doc">
In a similar fashion to what I did for the interleaving operator, I state and prove in the following some properties on the weak sequencing operator:
<ul class="doclist">
<li> the guarantee of the existence of a weak sequence t (at least one) for any traces t1 and t2 "is_weak_seq_existence"

</li>
<li> "is_weak_seq_nil_prop0"

</li>
<li> "is_weak_seq_nil_prop1", which states that if the empty trace is a weak sequence of t1 and t2, then both t1 and t2 must be empty

</li>
<li> "is_weak_seq_nil_prop2", which states that if t is a weak sequence of the empty trace and t2, then t=t2

</li>
<li> "is_weak_seq_nil_prop3", which states that if t is a weak sequence of t1 and the empty trace, then t=t1

</li>
<li> "is_weak_seq_split", which states that if (a :: t) is a weak sequence of t1 and t2, then either t1 starts with "a" or t2 starts with "a" and there is no conflict between t1 and "a"

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_weak_seq_existence</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>, <span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_left</span>.<br/>
- <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHt1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">t2</span>:=<span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHt1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_cons_left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_weak_seq_nil_prop0</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; ( (<span class="id" title="var">t1</span> &lt;&gt; <span class="id" title="var">nil</span>) \/ (<span class="id" title="var">t2</span> &lt;&gt; <span class="id" title="var">nil</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_weak_seq_nil_prop1</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>: <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; ( (<span class="id" title="var">t1</span> = <span class="id" title="var">nil</span>) /\ (<span class="id" title="var">t2</span> = <span class="id" title="var">nil</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_weak_seq_nil_prop2</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>: <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">nil</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">t1</span> = <span class="id" title="var">t2</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span>:=<span class="id" title="var">H</span>).<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">assert</span> (<span class="id" title="var">t2</span>=<span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_weak_seq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_weak_seq_nil_prop3</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>: <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">nil</span> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">t1</span> = <span class="id" title="var">t2</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">assert</span> (<span class="id" title="var">t1</span>=<span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_weak_seq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_weak_seq_split</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t1</span> <span class="id" title="var">a</span>) /\ (<span class="id" title="tactic">exists</span> <span class="id" title="var">t3</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">t2</span>=<span class="id" title="var">a</span>::<span class="id" title="var">t3</span>)/\(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t3</span> <span class="id" title="var">t</span>)) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id" title="tactic">exists</span> <span class="id" title="var">t3</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">t1</span>=<span class="id" title="var">a</span>::<span class="id" title="var">t3</span>)/\(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t3</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_left</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_right</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab14"></a><h3 class="section">Remark on the notion of scheduling</h3>


<div class="paragraph"> </div>

The three previously mentioned operators... 
<ul class="doclist">
<li> concatenation (also called strict sequencing)

</li>
<li> weak sequencing

</li>
<li> interleaving

</li>
</ul>

<div class="paragraph"> </div>

... can be understood as scheduling operators i.e. they allow or disallow some reordering of
events from traces t1 and t2 in the construction of a merged trace t

<div class="paragraph"> </div>

I encode this notion of a type of scheduling into the inductive type "ScheduleKind" defined below.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">ScheduleKind</span> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;|<span class="id" title="var">lstrict</span>:<span class="id" title="var">ScheduleKind</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">lseq</span>:<span class="id" title="var">ScheduleKind</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">lpar</span>:<span class="id" title="var">ScheduleKind</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab15"></a><h3 class="section">Merge operator</h3>


<div class="paragraph"> </div>

The merge operator can be understood as a n-ary extension of the three previously defined scheduling operators.
For any list of traces <span class="inlinecode"><span class="id" title="var">t1</span>,<span class="id" title="var">t2</span>,...,<span class="id" title="var">tn</span></span> and for any trace t_merge:
<ul class="doclist">
<li> saying that "t_merge is a merger of <span class="inlinecode"><span class="id" title="var">t1</span>,<span class="id" title="var">t2</span>,...,<span class="id" title="var">tn</span></span> according to strict sequencing" signifies that t_merge is the concatenated trace t1++t2++...++tn

</li>
<li> saying that "t_merge is a merger of <span class="inlinecode"><span class="id" title="var">t1</span>,<span class="id" title="var">t2</span>,...,<span class="id" title="var">tn</span></span> according to weak sequencing" signifies that t_merge verifies (is_weak_seq t1 t_remain t_merge) with t_remain being "a merger of <span class="inlinecode"><span class="id" title="var">t2</span>,...,<span class="id" title="var">tn</span></span> according to weak sequencing" and so on

</li>
<li> saying that "t_merge is a merger of <span class="inlinecode"><span class="id" title="var">t1</span>,<span class="id" title="var">t2</span>,...,<span class="id" title="var">tn</span></span> according to interleaving" signifies that t_merge verifies (is_interleaving t1 t_remain t_merge) with t_remain being "a merger of <span class="inlinecode"><span class="id" title="var">t2</span>,...,<span class="id" title="var">tn</span></span> according to interleaving" and so on

</li>
</ul>

<div class="paragraph"> </div>

I formalise the merge operator in Coq using an inductive predicate "n_merge_schedule"
such that for any schedule kind lk, for any list of non-empty traces "subs", and for any trace "t",
"(n_merge_schedule lk subs t)" states the membership of a given trace t into the set of mergers of traces from subs according to lk.

<div class="paragraph"> </div>

This inductive predicate can be inferred inductively using four construction rules:
<ul class="doclist">
<li> a construction rule "merge_zero" for the base case, which states that the empty trace is a merger of an empty list of traces

</li>
<li> and three construction rules, each dedicated to one of the three types of scheduling;
<ul class="doclist">
<li> "merge_strict", which states that for any strict-merger t of traces from remain (a list of traces), then t1++t is a strict-merger of t1::remain

</li>
<li> "merge_seq", which states that for any (weak) seq-merger t of traces from remain (a list of traces), then, for any trace t_merge verifying (is_weak_seq t1 t t_merge), we have that t_merge is a seq-merger of t1::remain

</li>
<li> "merge_par", which states that for any par-merger t of traces from remain (a list of traces), then, for any trace t_merge verifying (is_interleaving t1 t t_merge), we have that t_merge is a par-merger of t1::remain

</li>
</ul>

</li>
<li> let us note that for all three rules, we only allow the addition of non-empty traces in the list of traces to be merged. This is a modelisation choice.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">n_merge_schedule</span> : <br/>
&nbsp;&nbsp;<span class="id" title="var">ScheduleKind</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">Trace</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
| <span class="id" title="var">merge_zero</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">nil</span> <span class="id" title="var">nil</span>)<br/>
| <span class="id" title="var">merge_strict</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">remain</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t_first</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">remain</span> <span class="id" title="var">t_rep</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lstrict</span> (<span class="id" title="var">t_first</span>::<span class="id" title="var">remain</span>) (<span class="id" title="var">t_first</span>++<span class="id" title="var">t_rep</span>))<br/>
| <span class="id" title="var">merge_seq</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">remain</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">t_merge</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t_first</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> <span class="id" title="var">remain</span> <span class="id" title="var">t_rep</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">t_merge</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> (<span class="id" title="var">t_first</span>::<span class="id" title="var">remain</span>) <span class="id" title="var">t_merge</span>)<br/>
| <span class="id" title="var">merge_par</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">remain</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">t_merge</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t_first</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> <span class="id" title="var">remain</span> <span class="id" title="var">t_rep</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">t_merge</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> (<span class="id" title="var">t_first</span>::<span class="id" title="var">remain</span>) <span class="id" title="var">t_merge</span>).<br/>

<br/>
</div>

<div class="doc">
In a similar fashion to what was done for the three scheduling operators, 
one can define an prove some properties for the merge operator:
<ul class="doclist">
<li> the guarantee of the existence of a merged trace t (at least one) for any list of traces "subs" "n_merge_schedule_existence"

</li>
<li> "n_merge_schedule_nil_prop0", which states that if the merger of a list of traces is non-empty then there exists a non empty trace in that list of traces

</li>
<li> "n_merge_schedule_nil_prop1", which states that if the empty trace is a merger of a list of traces, then this list of traces is empty

</li>
<li> "n_merge_schedule_nil_prop2", which states that if a trace is a merger of an empty list of traces, then it must be the empty trace

</li>
<li> "n_merge_schedule_nonil_prop0", which states that only non-empty traces are allowed within a list of traces that is used as entry for the merge operator

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_existence</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">In</span> <span class="id" title="var">t0</span> <span class="id" title="var">subs</span>) -&gt; (<span class="id" title="var">t0</span>&lt;&gt;<span class="id" title="var">nil</span>) )<br/>
&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">subs</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">merge_zero</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHsubs</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">lk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span> ++ <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">merge_strict</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">is_weak_seq_existence</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_seq</span> <span class="id" title="var">subs</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">is_interleaving_existence</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_par</span> <span class="id" title="var">subs</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_nil_prop0</span> (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> &lt;&gt; <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">In</span> <span class="id" title="var">t0</span> <span class="id" title="var">subs</span>) /\ (<span class="id" title="var">t0</span> &lt;&gt; <span class="id" title="var">nil</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">subs</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">t_first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">t_first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">t_first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t0</span>,<span class="id" title="var">Ht0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Ht0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">subs</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">concat_nil_prop0</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">concat_nil_prop0</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">is_weak_seq_nil_prop0</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">is_weak_seq_nil_prop0</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">is_interleaving_nil_prop0</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">is_interleaving_nil_prop0</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_nil_prop1</span> (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">subs</span>=<span class="id" title="var">nil</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">app_eq_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">app_nil_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">is_weak_seq_nil_prop1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">is_interleaving_nil_prop1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_nil_prop2</span> (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">t_merge</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">nil</span> <span class="id" title="var">t_merge</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">t_merge</span>=<span class="id" title="var">nil</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t_merge</span>.<br/>
- <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_nonil_prop0</span> (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt;(<span class="id" title="keyword">forall</span> <span class="id" title="var">t0</span> : <span class="id" title="var">Trace</span>, <span class="id" title="var">In</span> <span class="id" title="var">t0</span> <span class="id" title="var">subs</span> -&gt; <span class="id" title="var">t0</span>&lt;&gt;<span class="id" title="var">nil</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn_merge_schedule</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn_merge_schedule</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn_merge_schedule</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As I am going to manipulate lists of traces when dealing with the merge operator,
I adapt here below the previously defined functions to replace or remove the n-th element of a list
to lists of traces:
<ul class="doclist">
<li> "subs_replace" replaces the n-th element of list of traces "subs" by a trace "t"

</li>
<li> "subs_remove" removes the n-th element of a list of traces

</li>
<li> "subs_remove_keep_in" is a Lemma stating that if a certain trace is found in a list of traces in which we have remove some elements, then it has to be found in the original list of traces

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subs_replace</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) : <span class="id" title="var">list</span> <span class="id" title="var">Trace</span> <br/>
&nbsp;&nbsp;:= <span class="id" title="var">list_replace_nth</span> <span class="id" title="var">Trace</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subs_remove</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) : <span class="id" title="var">list</span> <span class="id" title="var">Trace</span> <br/>
&nbsp;&nbsp;:= <span class="id" title="var">list_remove_nth</span> <span class="id" title="var">Trace</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">subs_remove_keep_in</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">t</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) -&gt; <span class="id" title="var">In</span> <span class="id" title="var">t</span> <span class="id" title="var">subs</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="var">list_remove_keep_in</span> (<span class="id" title="var">Trace</span>) <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>).<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="var">subs_remove</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab16"></a><h3 class="section">Some considerations on the distributivity of "no_conflict" w.r.t. the previous operators</h3>


<div class="paragraph"> </div>

In the following we demonstrate the distributive composition of the "no_conflict" function w.r.t. the three scheduling operators and the merge operator 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_conflict_concat</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) :<br/>
&nbsp;&nbsp;( (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t1</span> <span class="id" title="var">a</span>) /\ (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t2</span> <span class="id" title="var">a</span>) )<br/>
&nbsp;&nbsp;&lt;-&gt; (<span class="id" title="var">no_conflict</span> (<span class="id" title="var">t1</span>++<span class="id" title="var">t2</span>) <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_conflict_interleaving</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span> :<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t1</span> <span class="id" title="var">a</span>) /\ (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t2</span> <span class="id" title="var">a</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_interleaving</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_interleaving</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_interleaving</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_interleaving</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_conflict_weak_seq</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span> :<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t1</span> <span class="id" title="var">a</span>) /\ (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t2</span> <span class="id" title="var">a</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_weak_seq</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_weak_seq</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_weak_seq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_weak_seq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_conflict_n_merge</span> (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span> :<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>, (<span class="id" title="var">In</span> <span class="id" title="var">t0</span> <span class="id" title="var">subs</span>) -&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t0</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">subs</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_concat</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">a0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHsubs</span> <span class="id" title="var">t_rep</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_weak_seq</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHsubs</span> <span class="id" title="var">t_rep</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_interleaving</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHsubs</span> <span class="id" title="var">t_rep</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">subs</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_concat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_weak_seq</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">t_merge</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_interleaving</span> <span class="id" title="var">t_first</span> <span class="id" title="var">t_rep</span> <span class="id" title="var">t_merge</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab17"></a><h1 class="section">An Interaction Language and its semantics</h1>


<div class="paragraph"> </div>

This section is the core of the proof. It is dedicated to:
<ul class="doclist">
<li> the definition of the syntax of the interaction language. This syntax corresponds to the definition of a context-free grammar in which terms are build inductively from some basic terms and the application of some binary constructors to form more complex terms (as binary trees)

</li>
<li> the definition of a denotational-style semantics based on the composition of sets of traces using the previously defined operators on the semantic domain

</li>
<li> the definition of an operational-style semantics and the proof of its equivalence w.r.t. the denotational one

</li>
</ul>

<div class="paragraph"> </div>

The proof will be introduced in two steps:
<ul class="doclist">
<li> at first we will prove that the operational semantics is included in the denotational semantics. Elements of this proof will be introduced progressively in the same time as we are defining the different functions that take part in the definition of the operational semantics. Once all of those intermediate functions are defined, we will define the operational semantics and its inclusion in the denotational semantics will be almost immediately inferred.

</li>
<li> in a second step, we will prove that the denotational semantics is included in the operational semantics.

</li>
</ul>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab18"></a><h2 class="section">Syntax</h2>


<div class="paragraph"> </div>

We define the "Interaction" type, that inductively define interaction terms.
From basic building blocks which can either be the empty interaction "interaction_empty" or actions (of type "Action"), 
I then use different constructors to construct more complex interaction terms.

<div class="paragraph"> </div>

Let us describe the Coq definition, which includes 7 rules for the construction of the Interaction type:
<ul class="doclist">
<li> the "interaction_empty" constructor defines the empty interaction that can only express the empty trace nil

</li>
<li> the "interaction_act" cosntructor allows the construction of basic interactions that can only express a single trace (a::nil) for a given action "a"

</li>
<li> the "interaction_strict" constructor allows the construction of composed interactions of the form (interaction_strict i1 i2), where i1 and i2 are other (strictly smaller) interaction terms. (interaction_strict i1 i2) can express traces that are a strict sequencing of some trace expressed by i1 and some other expressed by i2

</li>
<li> likewise, (interaction_seq i1 i2) is an interaction that expresses traces that are weak sequences of traces expressed by i1 and i2

</li>
<li> also, (interaction_par i1 i2) is an interaction that expresses traces that are interleavings of traces expressed by i1 and i2

</li>
<li> the "interaction_alt" constructor allows the definition of interactions that can behave in a certain manner or (non-deterministically) in a certain other manner. Concretely, (interaction_alt i1 i2) expresses traces that are expressed either by i1 or by i2

</li>
<li> finally, the "interaction_loop" constructor allows the definition of interactions in which the behaviors of a given sub-interaction can be repeated an arbitraty number of times. This repetition is done according to one certain scheduling operator out of the three. Concretely:
<ul class="doclist">
<li> a (interaction_loop lstrict i1) interaction expresses traces which are strict-mergers of traces that can be expressed by i1

</li>
<li> a (interaction_loop lseq i1) interaction expresses traces which are seq-mergers of traces that can be expressed by i1

</li>
<li> a (interaction_loop lpar i1) interaction expresses traces which are par-mergers of traces that can be expressed by i1

</li>
</ul>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Interaction</span> : <span class="id" title="keyword">Set</span> := <br/>
&nbsp;&nbsp;<span class="id" title="var">interaction_empty</span>:<span class="id" title="var">Interaction</span> <br/>
&nbsp;&nbsp;|<span class="id" title="var">interaction_act</span>:<span class="id" title="var">Action</span>-&gt;<span class="id" title="var">Interaction</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">interaction_strict</span>:<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">interaction_seq</span>:<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">interaction_par</span>:<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">interaction_alt</span>:<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span><br/>
&nbsp;&nbsp;|<span class="id" title="var">interaction_loop</span>:<span class="id" title="var">ScheduleKind</span>-&gt;<span class="id" title="var">Interaction</span>-&gt;<span class="id" title="var">Interaction</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab19"></a><h2 class="section">Denotational Semantics</h2>


<div class="paragraph"> </div>

Following the definition of the syntax, the informal description of the intended meaning of interaction terms,
and the previous preliminaries on the definition of operators for the semantic domain, we can immediately define the
denotational-style semantics as is done below.

<div class="paragraph"> </div>

We use a Fixpoint to define a function "sem_de" such that (sem_de i t) is a predicate which means that
the trace t can be expressed by the interaction i. 
In other words, this (sem_de i t) predicate states the membership of trace t into the semantics of interaction i.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">sem_de</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) : (<span class="id" title="var">Trace</span> -&gt; <span class="id" title="keyword">Prop</span>) :=<br/>
<span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
|<span class="id" title="var">interaction_empty</span>          =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> = <span class="id" title="var">nil</span><br/>
|(<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>)        =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">nil</span><br/>
|(<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t</span>) \/ (<span class="id" title="var">sem_de</span> <span class="id" title="var">i2</span> <span class="id" title="var">t</span>)<br/>
|(<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t1</span>) /\ (<span class="id" title="var">sem_de</span> <span class="id" title="var">i2</span> <span class="id" title="var">t2</span>) /\ (<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
|(<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t1</span>) /\ (<span class="id" title="var">sem_de</span> <span class="id" title="var">i2</span> <span class="id" title="var">t2</span>) /\ (<span class="id" title="var">t</span> = <span class="id" title="var">t1</span> ++ <span class="id" title="var">t2</span>)<br/>
|(<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<span class="id" title="var">Trace</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t1</span>) /\ (<span class="id" title="var">sem_de</span> <span class="id" title="var">i2</span> <span class="id" title="var">t2</span>) /\ (<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>)<br/>
|(<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1</span>)   =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> (<span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>), (<span class="id" title="var">In</span> <span class="id" title="var">t0</span> <span class="id" title="var">subs</span>) -&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t0</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>)<br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h3 class="section">Some properties of "sem_de" w.r.t. loops</h3>


<div class="paragraph"> </div>

Let us remark the following:
<ul class="doclist">
<li> if an interaction "i" of the form "i = (interaction_loop lstrict i1)" accepts a trace t, and, if "i1" accepts a non-empty trace t1, then "i" must accept t1++t

</li>
<li> if an interaction "i" of the form "i = (interaction_loop lseq i1)" accepts a trace t, and, if "i1" accepts a non-empty trace t1, then, given a trace t_merge such that (is_weak_seq t1 t t_merge), "i" must accept t_merge

</li>
<li> if an interaction "i" of the form "i = (interaction_loop lpar i1)" accepts a trace t, and, if "i1" accepts a non-empty trace t1, then, given a trace t_merge such that (is_interleaving t1 t t_merge), "i" must accept t_merge

</li>
</ul>

<div class="paragraph"> </div>

Those three properties are stated and proven in the three Lemmas below:
<ul class="doclist">
<li> "sem_de_loop_strict_concat"

</li>
<li> "sem_de_loop_seq_weak_seq"

</li>
<li> and "sem_de_loop_par_interleaving"

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sem_de_loop_strict_concat</span> (<span class="id" title="var">i1</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">i1</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t1</span>) -&gt; (<span class="id" title="var">t1</span>&lt;&gt;<span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">i1</span>) (<span class="id" title="var">t1</span> ++ <span class="id" title="var">t</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">exists</span> (<span class="id" title="var">t1</span>::<span class="id" title="var">subs</span>).<br/>
<span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">merge_strict</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sem_de_loop_seq_weak_seq</span> (<span class="id" title="var">i1</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lseq</span> <span class="id" title="var">i1</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t1</span>) -&gt; (<span class="id" title="var">t1</span>&lt;&gt;<span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lseq</span> <span class="id" title="var">i1</span>) <span class="id" title="var">t_merge</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H0</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="tactic">exists</span> (<span class="id" title="var">t1</span>::<span class="id" title="var">subs</span>).<br/>
<span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_seq</span> <span class="id" title="var">subs</span> <span class="id" title="var">t1</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sem_de_loop_par_interleaving</span> (<span class="id" title="var">i1</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">t1</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lpar</span> <span class="id" title="var">i1</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">t1</span>) -&gt; (<span class="id" title="var">t1</span>&lt;&gt;<span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lpar</span> <span class="id" title="var">i1</span>) <span class="id" title="var">t_merge</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H0</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="tactic">exists</span> (<span class="id" title="var">t1</span>::<span class="id" title="var">subs</span>).<br/>
<span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_par</span> <span class="id" title="var">subs</span> <span class="id" title="var">t1</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h2 class="section">Operational Semantics</h2>


<div class="paragraph"> </div>

By contrast we have not yet laid the groundworks for the definition of the operational-style semantics.

<div class="paragraph"> </div>

In the following, we will progressively introduce the intermediate functions required for this definition.
In the meanwhile we will state some Lemmas which describe how the denotational-style semantics "sem_de" relates to those intermediate functions.
Those Lemmas will incidentaly constitute the main elements for the proof of the inclusion of the operational-style semantics
into the denotational-style semantics.

<div class="paragraph"> </div>

<a id="lab22"></a><h3 class="section">Static analysis of interaction terms</h3>


<div class="paragraph"> </div>

In the following we will introduce two propositional functions "terminates" and "avoids" which state some facts
about a certain interaction that is provided as entry. Those facts are inferred inductively from a static
analysis of the term structure of the interaction.

<div class="paragraph"> </div>

<a id="lab23"></a><h4 class="section">The "terminates" function</h4>


<div class="paragraph"> </div>

The "terminates" function can statically determine whether or not a given interaction can accept/express the empty trace
i.e. if it can allow the empty execution (nothing visibly happens).
Concretely, for any interaction "i", (terminates i) is a predicate that states whether or not "i" terminates.
Here the use of the word "terminate" relates to the ability to immediately reach a succesfull termination state.

<div class="paragraph"> </div>

The determination of (terminates i) is done inductively as so:
<ul class="doclist">
<li> the empty interaction can always terminate

</li>
<li> an interaction that corresponds to a single atomic action cannot terminate (the action must occur)

</li>
<li> an interaction that corresponds to a non-deterministic alternative between two sub-interaction can terminate if either of the alternative can

</li>
<li> an interaction that corresponds to the scheduling (using any of the three scheduling operator) of two sub-interactions can terminate iff both can

</li>
<li> an interaction that corresponds to the repetition of behaviors of a given sub-interaction can always terminate given that we can choose to repeat zero times

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">terminates</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id" title="var">interaction_empty</span>         =&gt; <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>)        =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; (<span class="id" title="var">terminates</span> <span class="id" title="var">i1</span>) \/ (<span class="id" title="var">terminates</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; (<span class="id" title="var">terminates</span> <span class="id" title="var">i1</span>) /\ (<span class="id" title="var">terminates</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) =&gt; (<span class="id" title="var">terminates</span> <span class="id" title="var">i1</span>) /\ (<span class="id" title="var">terminates</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; (<span class="id" title="var">terminates</span> <span class="id" title="var">i1</span>) /\ (<span class="id" title="var">terminates</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1</span>)   =&gt; <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Let us now see how the denotational semantics "sem_de" relates to the "terminates" function.

<div class="paragraph"> </div>

Intuitively, if an interaction terminates then it means that it can express the empty behavior (nothing visibly occurs).
Reciprocally, if an interaction can express the empty behavior, then it means that it must terminate.

<div class="paragraph"> </div>

Those two observations are stated and proved in the following Lemmas:
<ul class="doclist">
<li> "terminates_implies_de_accept_nil"

</li>
<li> and "de_accept_nil_implies_terminates"

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">terminates_implies_de_accept_nil</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">terminates</span> <span class="id" title="var">i</span>) -&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">nil</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_left</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_left</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">H0</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">merge_zero</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_nil_implies_terminates</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">nil</span>) -&gt; (<span class="id" title="var">terminates</span> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">app_eq_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">is_weak_seq_nil_prop1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">is_interleaving_nil_prop1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab24"></a><h4 class="section">The "avoids" function</h4>


<div class="paragraph"> </div>

In a similar fashion as "terminates", the "avoids" function
can statically determine whether or not a given interaction accepts executions / traces that do not involve any action of a given lifeline
(i.e. it "avoids" the lifeline).

<div class="paragraph"> </div>

Concretely, for any interaction "i" and any lifeline "l", (avoids i l) is a predicate that states whether or not "i" avoids "l".

<div class="paragraph"> </div>

The determination of (avoids i l) is done inductively as so:
<ul class="doclist">
<li> the empty interaction can always avoid any lifeline

</li>
<li> an interaction that corresponds to a single atomic action can avoid a lifeline iff this action do not occur on the lifeline (this echoes back to the notion of having no conflict)

</li>
<li> an interaction that corresponds to a non-deterministic alternative between two sub-interaction can avoid a lifeline if either of the alternative can

</li>
<li> an interaction that corresponds to the scheduling (using any of the three scheduling operator) of two sub-interactions can avoid a lifeline iff both can

</li>
<li> an interaction that corresponds to the repetition of behaviors of a given sub-interaction can always avoid a lifeline given that we can choose to repeat zero times

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">avoids</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">L</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id" title="var">interaction_empty</span>         =&gt; <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>)        =&gt; <span class="id" title="var">not</span> ((<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) = <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>) \/ (<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>) /\ (<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) =&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>) /\ (<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)    =&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>) /\ (<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1</span>)   =&gt; <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Let us now state and prove some properties on "avoids":
<ul class="doclist">
<li> "avoids_decidability" states that the predicate (avoids i l) is, for any interaction "i" and lifeline "l", decidable. Indeed, the logic that is used in Coq is intuitionistic logic, which does not include the "Law of excluded middle". As a result, we must prove the decidability of propositions if we need to use it. Given that (avoids i l) is constructed inductively, one can decide whether or not it is held true, and, it cannot both be True or False at the same time.

</li>
<li> "terminates_implies_avoids" states that if an interaction terminates, then it can avoid any lifeline

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">avoids_decidability</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>) \/ (<span class="id" title="var">not</span> (<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> ; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">not_eq_or_not_not_eq</span>.<br/>
- <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">IHi2</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> ; <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">terminates_implies_avoids</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">terminates</span> <span class="id" title="var">i</span>) -&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
- <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
With regards to the denotational semantics, I make the following remarks:
<ul class="doclist">
<li> if an interaction can express the empty trace, then it can avoid any lifeline. This is formalized in the "de_accept_nil_implies_avoids" Lemma which proof can be directly inferred from the previously proven "terminates_implies_avoids" and "de_accept_nil_implies_terminates" Lemmas.

</li>
<li> if an interaction accepts a trace, and that trace has no conflict w.r.t. a certain lifeline, then it must mean that the interaction can avoid that lifeline. This is formalized in the "de_accept_t_and_no_conflict_implies_avoids" Lemma.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_nil_implies_avoids</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">nil</span>) -&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">terminates_implies_avoids</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">de_accept_nil_implies_terminates</span>.<br/>
<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_t_and_no_conflict_implies_avoids</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span>: <span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">not_eq_sym</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_concat</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hn1</span>,<span class="id" title="var">Hn2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">a</span> <span class="id" title="var">t1</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">a</span> <span class="id" title="var">t2</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">no_conflict_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hn1</span>,<span class="id" title="var">Hn2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">a</span> <span class="id" title="var">t1</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">a</span> <span class="id" title="var">t2</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">no_conflict_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hn1</span>,<span class="id" title="var">Hn2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">a</span> <span class="id" title="var">t1</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">a</span> <span class="id" title="var">t2</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab25"></a><h3 class="section">The pruning of interactions</h3>


<div class="paragraph"> </div>

In the following we are interested in the question of how to rewrite interaction terms (using some form of term rewriting)
that can avoid a certain lifeline so that all the trace that are expressed by the rewritten interaction have no conflicts w.r.t. the lifeline.

<div class="paragraph"> </div>

Indeed, if we suppose that a certain interaction avoids a lifeline, it only means it can express traces that do not involve the lifeline,
and it does not mean that all the traces it can express have no conflicts w.r.t. the lifeline.

<div class="paragraph"> </div>

However we can infer a rewritten version of this interaction which expresses exactly all the traces of the original interaction
that have no conflict w.r.t. the lifeline.

<div class="paragraph"> </div>

I call the inference of this rewritten interaction "pruning", and the rewritten interaction is the "pruned" interaction.

<div class="paragraph"> </div>

Concretely, for a given interaction "i" and for a given lifeline "l" such that the predicate "(avoids i l)" is held True,
the predicate "(is_prune_of i l i')" states whether or not an interaction "i'" is the pruned version of "i" w.r.t. "l".

<div class="paragraph"> </div>

This formulation as a predicate in fact corresponds to a certain "prune" function (not defined here)
which can statically compute a uniquely defined "pruned" interaction.
The existence of this "prune" function is congruent to having the "is_prune_of" predicate satisfying properties of existence and unicity.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">is_prune_of</span> : <span class="id" title="var">Interaction</span> -&gt; <span class="id" title="var">L</span> -&gt; <span class="id" title="var">Interaction</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
| <span class="id" title="var">prune_empty</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">interaction_empty</span> <span class="id" title="var">l</span> <span class="id" title="var">interaction_empty</span>)<br/>
| <span class="id" title="var">prune_act</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">not</span> (<span class="id" title="var">l</span> = (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>) <span class="id" title="var">l</span> (<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>))<br/>
| <span class="id" title="var">prune_alt_both</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">l</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>))<br/>
| <span class="id" title="var">prune_alt_left</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">not</span> (<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
| <span class="id" title="var">prune_alt_right</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i2'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">not</span> (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>)<br/>
| <span class="id" title="var">prune_par</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">l</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>))<br/>
| <span class="id" title="var">prune_strict</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">l</span> (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>))<br/>
| <span class="id" title="var">prune_seq</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">l</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>))<br/>
| <span class="id" title="var">prune_loop_select</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span> <span class="id" title="var">i1'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1</span>) <span class="id" title="var">l</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1'</span>))<br/>
| <span class="id" title="var">prune_loop_elim</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i1</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">not</span> (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1</span>) <span class="id" title="var">l</span> <span class="id" title="var">interaction_empty</span>)<br/>
.<br/>

<br/>
</div>

<div class="doc">
<a id="lab26"></a><h4 class="section">Inherent properties of the pruning</h4>


<div class="paragraph"> </div>

As explained earlier, we will need the unicity property for the "is_prune_of" predicate.
This property is stated and proved in the "prune_unicity" Lemma below.

<div class="paragraph"> </div>

If, for any given interactions "i", "i1" and "i2" we have both (is_prune_of i l i1') and (is_prune_of i l i2'), then "i1" and "i2" are in fact the same interaction term.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">prune_unicity</span> (<span class="id" title="var">i</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>):<br/>
&nbsp;&nbsp;( (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i1'</span>) /\ (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i2'</span>) )<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">i1'</span>=<span class="id" title="var">i2'</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H1</span>,<span class="id" title="var">H2</span>).<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'0</span> = <span class="id" title="var">i1'1</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'0</span> <span class="id" title="var">i1'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i2'0</span> = <span class="id" title="var">i2'1</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'0</span> <span class="id" title="var">i2'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'0</span> = <span class="id" title="var">i1'1</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'0</span> <span class="id" title="var">i1'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i2'0</span> = <span class="id" title="var">i2'1</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'0</span> <span class="id" title="var">i2'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'0</span> = <span class="id" title="var">i1'1</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'0</span> <span class="id" title="var">i1'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i2'0</span> = <span class="id" title="var">i2'1</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'0</span> <span class="id" title="var">i2'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'0</span> = <span class="id" title="var">i1'1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'0</span> <span class="id" title="var">i1'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i2'0</span> = <span class="id" title="var">i2'1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'0</span> <span class="id" title="var">i2'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H17</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'</span> = <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'</span> = <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">i1'0</span> = <span class="id" title="var">i1'1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi</span> <span class="id" title="var">i1'0</span> <span class="id" title="var">i1'1</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H13</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
I also state and prove some properties linked to the relationship between pruning and avoiding:
<ul class="doclist">
<li> "prunable_implies_avoids" states that if an interaction can be rewritten (pruned) into a pruned version w.r.t. a lifeline "l", then it means it could avoid "l"

</li>
<li> "avoids_implies_prunable" states that if an interaction can avoid a certain lifeline "l", then it means it can be pruned w.r.t. "l" (this is the existence property of the predicate)

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">prunable_implies_avoids</span> (<span class="id" title="var">i</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>):<br/>
&nbsp;( <span class="id" title="tactic">exists</span> (<span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>), (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i'</span>) )<br/>
&nbsp;-&gt; (<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">H</span>).<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
- <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">not_eq_sym</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">avoids_implies_prunable</span> (<span class="id" title="var">i</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>):<br/>
&nbsp;(<span class="id" title="var">avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>)<br/>
&nbsp;-&gt;( <span class="id" title="tactic">exists</span> (<span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>), (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i'</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">interaction_empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_empty</span>.<br/>
- <span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_act</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">not_eq_sym</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_strict</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_seq</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_par</span> ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">avoids_decidability</span> <span class="id" title="var">i1</span> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">avoids_decidability</span> <span class="id" title="var">i2</span> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha1</span>:=<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha2</span>:=<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">Hi1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">Hi2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_alt_both</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha1</span>:=<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">Hi1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_alt_left</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha2</span>:=<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">Hi2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_alt_right</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ; <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">avoids_decidability</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Ha1</span>:=<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">Hi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">s</span> <span class="id" title="var">i'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_loop_select</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">interaction_empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">prune_loop_elim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab27"></a><h4 class="section">Properties of pruning w.r.t. the denotational semantics</h4>


<div class="paragraph"> </div>

In the following, I will state some properties of pruning w.r.t. the denotational semantics "sem_de".

<div class="paragraph"> </div>

Let us remark that if an interaction can express the empty trace, then it means it can be pruned w.r.t. any lifeline. 
This is formalized as the "de_accept_nil_implies_prunable" Lemma which proof is immediately inferred from previous Lemmas
"de_accept_nil_implies_prunable" and "avoids_implies_prunable".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_nil_implies_prunable</span> (<span class="id" title="var">i</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;-&gt; <span class="id" title="tactic">exists</span> (<span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>), (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i'</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_nil_implies_avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">avoids_implies_prunable</span>.<br/>
<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

Let us also remark that this can be generalized for the acceptation of any trace that has no conflict with the lifeline.
This is formalized as the "de_accept_t_and_no_conflict_implies_prunable" Lemma which proof is immediately inferred from previous Lemmas
"de_accept_t_and_no_conflict_implies_avoids" and "avoids_implies_prunable".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_t_and_no_conflict_implies_prunable</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span>: <span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id" title="tactic">exists</span> (<span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>), (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) <span class="id" title="var">i'</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="var">avoids_implies_prunable</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_avoids</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Let us remark that
if an interaction "i" can be pruned into "i'" and if that "i'" accepts a trace "t",
then the original "i" must also accept "t". 
This property is crucial given that it means that the pruning transformation preserves the semantics. 
The semantics of the pruned version is included into that of the original interaction. 
In other words, the pruning selects a subset of the semantics and discards (prunes) the rest. 
No additional unwelcomed traces are introduced in the semantics of the pruned interaction.

<div class="paragraph"> </div>

This property is formalized in the "prune_kept_de" Lemma below.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">prune_kept_de</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span>: <span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i'</span>) /\ (<span class="id" title="var">sem_de</span> <span class="id" title="var">i'</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hconc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hconc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">Hd</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hd</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hconc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">l</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i'</span> <span class="id" title="var">l0</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i'</span> <span class="id" title="var">l0</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">subs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi</span> <span class="id" title="var">i1'</span> <span class="id" title="var">l0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">merge_zero</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
With "prune_kept_de", we have proven that the semantics of the pruned version is included in that of the original.

<div class="paragraph"> </div>

We will now prove, in two steps, that the semantics of the pruned version is a minimal cut of that of the original.
What we mean to say is that the selection of the subset of the semantics that is operated by prune is minimal in so far
as we only eliminate traces that we need to eliminate so as to satisfy that the pruned version avoids a certain lifeline.
Traces that do not involve the lifeline w.r.t. which the pruning is done must be kept in the semantics.

<div class="paragraph"> </div>

This two-steps proof is done with Lemmas:
<ul class="doclist">
<li> "de_accept_nil_implies_pruned_de_accept_nil ", which states that if the original interaction accepts the empty trace, then the pruned version must also accept the empty trace

</li>
<li> "de_accept_cons_and_no_conflict_implies_prunable_and_keep_de", which states that if the original interaction accepts a non-empty trace that has no conflict with the lifeline against which we prune, then this trace must be found in the semantics of the pruned version.

</li>
</ul>

<div class="paragraph"> </div>

Those two lemmas taken together in addition to the "prune_kept_de" Lemma state that
the semantics of the pruned version is exactly the subset of the semantics
of the original in which all traces have no conflict with the lifeline against which the pruning is done.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

Let us make some additional remarks on the "de_accept_cons_and_no_conflict_implies_prunable_and_keep_de" Lemma.
This Lemma is formulated with an existential quantifier stating that: there exists a certain pruned version of the
original that accepts the trace t.
However we have previously seen that the property of unicity is proven for the "is_prune_of" predicate.
As a result, it is not "a pruned version" but "the pruned version".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_loop_accept_t_and_no_conflict_implies_nil_or_avoids</span> <br/>
&nbsp;&nbsp;(<span class="id" title="var">i1</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">lk</span>:<span class="id" title="var">ScheduleKind</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lk</span> <span class="id" title="var">i1</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; ((<span class="id" title="var">t</span> = <span class="id" title="var">nil</span>) \/ (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnoco</span> <span class="id" title="var">Hsem</span>.<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsem</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsem</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Hrep</span>).<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">eq_or_not_eq_trace</span> <span class="id" title="var">t</span> <span class="id" title="var">nil</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">right</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">n_merge_schedule_nil_prop0</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t0</span>,<span class="id" title="var">Ht0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht0</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hint0</span>:=<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hr</span>:=<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_n_merge</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrep</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hr1</span>,<span class="id" title="var">Hr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hr1</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_t_and_no_conflict_implies_pruned_de_accept_t</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> <span class="id" title="var">i'</span>: <span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) <span class="id" title="var">i'</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i'</span> <span class="id" title="var">t</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hnoco</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_concat</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnoco</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnoco</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> <span class="id" title="var">t1</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">a</span> <span class="id" title="var">t2</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hnoco</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnoco</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> <span class="id" title="var">t1</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">a</span> <span class="id" title="var">t2</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hnoco</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnoco</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> <span class="id" title="var">t1</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">a</span> <span class="id" title="var">t2</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">avoids</span> <span class="id" title="var">i2</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_avoids</span> <span class="id" title="var">i2</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi2</span> <span class="id" title="var">i2'</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hsem</span>:=<span class="id" title="var">H1</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">subs</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHi</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_n_merge</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> = <span class="id" title="var">nil</span> \/ <span class="id" title="var">avoids</span> <span class="id" title="var">i1</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">de_loop_accept_t_and_no_conflict_implies_nil_or_avoids</span> <span class="id" title="var">i1</span> <span class="id" title="var">lk</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_nil_implies_pruned_de_accept_nil</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> <span class="id" title="var">i'</span>: <span class="id" title="var">Interaction</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">L</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">i'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i'</span> <span class="id" title="var">nil</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">exists_action_on_lifeline</span> <span class="id" title="var">l</span>).<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span>,<span class="id" title="var">H</span>).<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_pruned_de_accept_t</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">a</span> <span class="id" title="var">nil</span>).<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
- <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A final Lemma on the relationship between pruning and the denotational semantics
relates to a previous remark. 
I have said that the semantics of the pruned version is the set of traces accepted by the original
that have no conflict with the lifeline against which the pruning is done.

<div class="paragraph"> </div>

Reciprocally, this means that the semantics of the pruned version only contain traces which have no conflict w.r.t.
said lifeline. This is formalized and proven in the "prune_removes_conflicts" Lemma.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">prune_removes_conflicts</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>):<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) <span class="id" title="var">i'</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i'</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">no_conflict</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H1</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">t</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_interleaving</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_concat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_weak_seq</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">no_conflict_n_merge</span> <span class="id" title="var">lk</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_prune_of</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">no_conflict_nil</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab28"></a><h3 class="section">The execution relation</h3>


<div class="paragraph"> </div>

The operational-style semantics relies on the definition of a "small-step" that corresponds
to the execution of an atomic action within an interaction and which result in a "remaining" or "follow-up" interaction
which exactly accepts all the suffixes (tails) of traces of the original that start with the given action
(uniquely determined by its position in the interaction term, even though there may be several occurences of the
same action in the interaction).

<div class="paragraph"> </div>

In Coq, I formalize this "small-step" or "execution relation" as an inductive predicate "is_next_of" such that,
for any interactions "i" and "i'" and any action "a", the predicate "(is_next_of i a i')" signifies that
action "a" can be immediately executed in "i" and this results in "i" being rewritten into interaction "i'"
that accepts all continuations of the executions of "i" that start with the execution of action "a"
(at a precise position in the term structure of "i").

<div class="paragraph"> </div>

Given that, in this Coq proof, I do not formalize the notion of uniquely identifying actions via their positions,
I do not have the unicity of "is_next_of". But it is not required in this Coq proof anyways.
Let us remark however that I have formalized this in another Coq proof
(for the correctness of a multi-trace analysis algorithm) available here:
<a href="https://github.com/erwanM974/coq_hibou_label_multi_trace_analysis">https://github.com/erwanM974/coq_hibou_label_multi_trace_analysis</a> 

<div class="paragraph"> </div>

The "is_next_of" predicate can be inferred inductively via twelve construction rules:
<ul class="doclist">
<li> (1) "execute_at_leaf" states that an interaction that consists of a single action can immediately execute this action, and that the empty interaction remains to be executed

</li>
<li> (2) "execute_left_alt" states that if the left sub-interaction of an interaction "i" of the form (interaction_alt i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred 

</li>
<li> (3) "execute_right_alt" states that if the right sub-interaction of an interaction "i" of the form (interaction_alt i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (4) "execute_left_par" states that if the left sub-interaction of an interaction "i" of the form (interaction_par i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (5) "execute_right_par" states that if the right sub-interaction of an interaction "i" of the form (interaction_par i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (6) "execute_left_strict" states that if the left sub-interaction of an interaction "i" of the form (interaction_strict i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (7) "execute_right_strict" states that if the right sub-interaction of an interaction "i" of the form (interaction_strict i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (8) "execute_left_seq" states that if the left sub-interaction of an interaction "i" of the form (interaction_seq i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (9) "execute_right_seq" states that if the right sub-interaction of an interaction "i" of the form (interaction_seq i1 i2) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (10) "execute_loop_strict" states that if the sub-interaction of an interaction "i" of the form (interaction_loop lstrict i1) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (11) "execute_loop_seq" states that if the sub-interaction of an interaction "i" of the form (interaction_loop lseq i1) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
<li> (12) "execute_loop_par" states that if the sub-interaction of an interaction "i" of the form (interaction_loop lpar i1) can execute an action a, then "i" can too and the remaining interaction can be inferred

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">is_next_of</span> : <span class="id" title="var">Interaction</span> -&gt; <span class="id" title="var">Action</span> -&gt; <span class="id" title="var">Interaction</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
|<span class="id" title="var">execute_at_leaf</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> (<span class="id" title="var">interaction_act</span> <span class="id" title="var">a</span>) <span class="id" title="var">a</span> <span class="id" title="var">interaction_empty</span>)<br/>
|<span class="id" title="var">execute_left_alt</span>     : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>)<br/>
|<span class="id" title="var">execute_right_alt</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i2'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">a</span> <span class="id" title="var">i2'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> (<span class="id" title="var">interaction_alt</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">a</span> <span class="id" title="var">i2'</span>)<br/>
|<span class="id" title="var">execute_left_par</span>     : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
|<span class="id" title="var">execute_right_par</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i2'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">a</span> <span class="id" title="var">i2'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
|<span class="id" title="var">execute_left_strict</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
|<span class="id" title="var">execute_right_strict</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i2'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">a</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">terminates</span> <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">a</span> <span class="id" title="var">i2'</span>)<br/>
|<span class="id" title="var">execute_left_seq</span>     : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
|<span class="id" title="var">execute_right_seq</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i2</span> <span class="id" title="var">a</span> <span class="id" title="var">i2'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) <span class="id" title="var">i1'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span>) <span class="id" title="var">a</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>))<br/>
|<span class="id" title="var">execute_loop_strict</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">i1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
|<span class="id" title="var">execute_loop_seq</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lseq</span> <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lseq</span> <span class="id" title="var">i1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
|<span class="id" title="var">execute_loop_par</span>    : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">i1</span> <span class="id" title="var">i1'</span> : <span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> <span class="id" title="var">i1'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">is_next_of</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lpar</span> <span class="id" title="var">i1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lpar</span> <span class="id" title="var">i1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
</div>

<div class="doc">
<a id="lab29"></a><h4 class="section">Properties w.r.t. the denotational semantics</h4>


<div class="paragraph"> </div>

In the following, I will state some properties of the execution relation w.r.t. the denotational semantics "sem_de".

<div class="paragraph"> </div>

Let us remark that the intuitive meaning of the "is_next_of" predicate is attached to the following property:
If (is_next_of i a i') and the remaining interaction i' accepts a trace t
then the original interaction i should accept the trace (a::t).

<div class="paragraph"> </div>

This property is formalized and proven in the "execute_keep_de" Lemma below.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">execute_keep_de</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span>: <span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">i'</span>) <br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i'</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H1</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">t</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_cons_left</span>. <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span> ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_cons_right</span>. <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">terminates_implies_de_accept_nil</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHis_next_of</span>). <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hws</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>). <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHis_next_of</span>). <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_cons_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hws</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">prune_kept_de</span> <span class="id" title="var">i1</span> <span class="id" title="var">i1'</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_cons_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">prune_removes_conflicts</span> <span class="id" title="var">i1</span> <span class="id" title="var">i1'</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H</span>,<span class="id" title="var">Hconc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> ((<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>)::<span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconc</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hconc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_strict</span> <span class="id" title="var">subs</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>) <span class="id" title="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H</span>,<span class="id" title="var">Hconc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> ((<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>)::<span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_seq</span> <span class="id" title="var">subs</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>) <span class="id" title="var">t2</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_cons_left</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H</span>,<span class="id" title="var">Hconc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> ((<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>)::<span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">t0</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHis_next_of</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">merge_par</span> <span class="id" title="var">subs</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t1</span>) <span class="id" title="var">t2</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_cons_left</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h3 class="section">Formal definition of the operational semantics</h3>


<div class="paragraph"> </div>

Now that I have laid the groundworks of this definition, via the formulation of the execution relation,
I can formally define the operational-style semantics "sem_op" in a similar fashion as "sem_de"
i.e. as a predicate such that, for any interaction i and any trace t,
(sem_op i t) is a predicate which states that trace t belongs to the semantics of interaction i.

<div class="paragraph"> </div>

Let us remark that the definition of "sem_de" was done using a Fixpoint.
By contrast, I will use an inductive predicate to define "sem_op".
The construction of this inductive predicate relies on two construction rules:
<ul class="doclist">
<li> "sem_op_empty", which is the base case and states that for any interaction, if it terminates then the empty trace is in its semantics

</li>
<li> "sem_op_event", which corresponds to the use of the small-step, states that if an interaction i can execute an action a and turn into interaction i', and, if interaction i' can express a trace t, then i can express (a::t)

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">sem_op</span> : <span class="id" title="var">Interaction</span> -&gt; <span class="id" title="var">Trace</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;| <span class="id" title="var">sem_op_empty</span>  : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span>:<span class="id" title="var">Interaction</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">terminates</span> <span class="id" title="var">i</span>)  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_op</span> <span class="id" title="var">i</span> <span class="id" title="var">nil</span>)<br/>
&nbsp;| <span class="id" title="var">sem_op_event</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">i</span> <span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">is_next_of</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">i'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_op</span> <span class="id" title="var">i'</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="var">sem_op</span> <span class="id" title="var">i</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>) ).<br/>

<br/>
</div>

<div class="doc">
Now that we have defined "sem_op", we can immediately prove the inclusion of "sem_op" into "sem_de"
thanks to the Lemmas that we have proven relating to the relationship of "sem_de" w.r.t. the
intermediate functions (terminates, avoids, prune, is_next_of).

<div class="paragraph"> </div>

Notably, we have already proven that "sem_de" accepts the same two construction rules as "sem_op". Indeed:
<ul class="doclist">
<li> Lemma "terminates_implies_de_accept_nil" states that sem_de verifies the "sem_op_empty" rule

</li>
<li> Lemma "execute_keep_de" states that sem_de verifies the "sem_op_event" rule

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">op_implies_de</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">t</span> : <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_op</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>) -&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>).<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">terminates_implies_de_accept_nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">execute_keep_de</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">a</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHt</span> <span class="id" title="var">i'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
What was discussed just above implies the inclusion of "sem_op" into "sem_de".

<div class="paragraph"> </div>

However it does not implies the reciprocate (i.e. whether or not "sem_de" is included in "sem_op").
Indeed, it may be so that, if it were formulated using construction rules,
"sem_de" would also verify some other construction rules in addition to "sem_op_empty" and "sem_op_event",
which would allow the acceptation of some more traces in the semantics.

<div class="paragraph"> </div>

The proof in that other direction is explained in the next section.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab31"></a><h2 class="section">Proof of the inclusion of "sem_de" into "sem_op"</h2>


<div class="paragraph"> </div>

<a id="lab32"></a><h3 class="section">Hypotheses de tri</h3>


<div class="paragraph"> </div>

The rest of the proof relies on some hypotheses on the fact that,
when computing the denotational semantics "sem_de" for loops
i.e. for interactions which root node is a loop operator,
the traces issued from each iteration of the sub-behavior are sorted
by order of occurence in the "subs" list of traces that is used for the merger.

<div class="paragraph"> </div>

Let us indeed recall the definition of "sem_de":

<div class="paragraph"> </div>

<pre>
Fixpoint sem_de (i : Interaction) : (Trace -&gt; Prop) :=
match i with
|interaction_empty          =&gt; fun t:Trace =&gt; 
                                  t = nil
|(interaction_act a)        =&gt; fun t:Trace =&gt; 
                                  t = a :: nil
|(interaction_alt i1 i2)    =&gt; fun t:Trace =&gt; 
                                  (sem_de i1 t) \/ (sem_de i2 t)
|(interaction_par i1 i2)    =&gt; fun t:Trace =&gt; 
                                  exists (t1 t2:Trace), 
                                    (sem_de i1 t1) /\ (sem_de i2 t2) /\ (is_interleaving t1 t2 t)
|(interaction_strict i1 i2) =&gt; fun t:Trace =&gt; 
                                  exists (t1 t2:Trace), 
                                    (sem_de i1 t1) /\ (sem_de i2 t2) /\ (t = t1 ++ t2)
|(interaction_seq i1 i2)    =&gt; fun t:Trace =&gt; 
                                  exists (t1 t2:Trace), 
                                    (sem_de i1 t1) /\ (sem_de i2 t2) /\ (is_weak_seq t1 t2 t)
|(interaction_loop lk i1)   =&gt; fun t:Trace =&gt; 
                                  exists (subs:list Trace),
                                    (forall (t0:Trace), (In t0 subs) -&gt; (sem_de i1 t0) )
                                    /\ (n_merge_schedule lk subs t)
</pre>

<div class="paragraph"> </div>

We can see that, for defining the semantics of loops, we use a certain list of traces "subs".
This list of (potentially disctinct) traces enumerates the successive iterations of the behaviors
of the sub(interaction "i1".
A trace is then accepted by the interaction if it is a merger of those traces.

<div class="paragraph"> </div>

However, as per the definition of the weak sequencing and interleaving operators on traces, nothing prevents
those traces to be put in any order within "subs".

<div class="paragraph"> </div>

The formal proof on Coq relies on a good faith hypothesis that the traces are inserted in "subs"
during the construction of the denotational semantics
in the same order as that of the instanciations of the sub-interactions i1' that are
operated by the operational semantics.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_cons_strict_prop</span> (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>):<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">subs</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;-&gt; ( <span class="id" title="tactic">exists</span> (<span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">remain</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subs</span> = (<span class="id" title="var">a</span>::<span class="id" title="var">t0</span>)::<span class="id" title="var">remain</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">subs</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">cons_eq_app</span> <span class="id" title="var">Action</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">remain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">hypothese_de_tri_strict</span> <br/>
&nbsp;&nbsp;(<span class="id" title="var">t0</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge_remain</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">remain</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) :<br/>
(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lstrict</span> ((<span class="id" title="var">a</span> :: <span class="id" title="var">t0</span>) :: <span class="id" title="var">remain</span>) (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>))<br/>
-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">remain</span> <span class="id" title="var">t_merge_remain</span>)<br/>
-&gt; (<span class="id" title="var">t</span> = <span class="id" title="var">t0</span> ++ <span class="id" title="var">t_merge_remain</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_cons_seq_prop</span> (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>):<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> <span class="id" title="var">subs</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;-&gt; ( <span class="id" title="tactic">exists</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span>&lt;<span class="id" title="var">length</span> <span class="id" title="var">subs</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ ( (<span class="id" title="var">a</span>::<span class="id" title="var">t0</span>) = (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">nil</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ ( <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t0</span>&lt;&gt;<span class="id" title="var">nil</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> (<span class="id" title="var">subs_replace</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">t0</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ ( (<span class="id" title="var">t0</span>=<span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">hypothese_de_tri_weak_seq</span> <br/>
&nbsp;(<span class="id" title="var">t0</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">subs</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> (<span class="id" title="var">subs_replace</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">t0</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">t'</span>:<span class="id" title="var">Trace</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t0</span> <span class="id" title="var">t'</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">n_merge_schedule_cons_par_prop</span> (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>):<br/>
&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> <span class="id" title="var">subs</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;-&gt; ( <span class="id" title="tactic">exists</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">t0</span>:<span class="id" title="var">Trace</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span>&lt;<span class="id" title="var">length</span> <span class="id" title="var">subs</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ ( (<span class="id" title="var">a</span>::<span class="id" title="var">t0</span>) = (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">nil</span>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ ( <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t0</span>&lt;&gt;<span class="id" title="var">nil</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> (<span class="id" title="var">subs_replace</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">t0</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ ( (<span class="id" title="var">t0</span>=<span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">hypothese_de_tri_interleaving</span> <br/>
&nbsp;(<span class="id" title="var">t0</span> <span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) (<span class="id" title="var">subs</span>:<span class="id" title="var">list</span> <span class="id" title="var">Trace</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">subs</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> (<span class="id" title="var">subs_replace</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span> <span class="id" title="var">t0</span>) <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">t'</span>:<span class="id" title="var">Trace</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="id" title="var">is_interleaving</span> <span class="id" title="var">t0</span> <span class="id" title="var">t'</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab33"></a><h3 class="section">Existence of a next interaction</h3>


<div class="paragraph"> </div>

Let us recall that the proof in the other direction relied on th definition of
the following Lemma:
<pre>
Lemma execute_keep_de (i i': Interaction) (a:Action) (t:Trace) :
  (is_next_of i a i') 
  -&gt; (sem_de i' t)
  -&gt; (sem_de i (a::t) ).
</pre>

<div class="paragraph"> </div>

In order to prove this direction, we would need some sort of reciprocate to "execute_keep_de".

<div class="paragraph"> </div>

This reciprocate take the following form:
<pre>
Lemma de_accept_cons_implies_execution_possible 
  (i : Interaction) (a:Action) (t:Trace) :
  (sem_de i (a::t) )
    -&gt; (exists (i':Interaction), (is_next_of i a i') /\ (sem_de i' t) ).
</pre>

<div class="paragraph"> </div>

It states that if a given interaction "i" accepts a trace that starts with an action "a",
then there must exist some interaction "i'" that results from the execution of "a" in "i"
and this interaction "i'" must accept "t".

<div class="paragraph"> </div>

Let us remark that another added difficulty to this proof lies in the fact that we do not have
the unicity of the "i'" that can satisfy "(is_next_of i a i')".

<div class="paragraph"> </div>

Indeed, given that we do not uniquely identify the executions of actions via their positions
in the syntactic term "i", and because there can be several occurences of a leaf term "a"
in the tree-structure of "i", there can be several such "i'".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">de_accept_cons_implies_execution_possible</span> <br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">Action</span>) (<span class="id" title="var">t</span>:<span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id" title="tactic">exists</span> (<span class="id" title="var">i'</span>:<span class="id" title="var">Interaction</span>), (<span class="id" title="var">is_next_of</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">i'</span>) /\ (<span class="id" title="var">sem_de</span> <span class="id" title="var">i'</span> <span class="id" title="var">t</span>) ).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">interaction_empty</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_at_leaf</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_right_strict</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">de_accept_nil_implies_terminates</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_left_strict</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">is_weak_seq_nil_prop2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> := <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_nil_implies_prunable</span> <span class="id" title="var">i1</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_right_seq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_nil_implies_pruned_de_accept_nil</span> <span class="id" title="var">i1</span> <span class="id" title="var">i1'</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>)) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_left_seq</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_left_seq</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">Hi2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hd2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_pruned_de_accept_t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">i'</span> : <span class="id" title="var">Interaction</span>, <span class="id" title="var">is_prune_of</span> <span class="id" title="var">i1</span> (<span class="id" title="var">lifeline</span> <span class="id" title="var">a</span>) <span class="id" title="var">i'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_prunable</span> <span class="id" title="var">i1</span> <span class="id" title="var">a</span> (<span class="id" title="var">a0</span>::<span class="id" title="var">t1</span>)) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">Hp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_right_seq</span> ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a0</span>::<span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">de_accept_t_and_no_conflict_implies_pruned_de_accept_t</span> <span class="id" title="var">i1</span> <span class="id" title="var">i1'</span> <span class="id" title="var">a</span> (<span class="id" title="var">a0</span>::<span class="id" title="var">t1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">is_interleaving_nil_prop2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_right_par</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_left_par</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1'</span> <span class="id" title="var">i2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_left_par</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">Hi2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi2</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hi2</span>,<span class="id" title="var">Hd2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_right_par</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a0</span>::<span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i1'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_left_alt</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i2'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_right_alt</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">subs</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hin</span>,<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hr</span>:=<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">n_merge_schedule_cons_strict_prop</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrep</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t0</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">remain</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">assert</span> (<span class="id" title="var">In</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t0</span>) ((<span class="id" title="var">a</span> :: <span class="id" title="var">t0</span>) :: <span class="id" title="var">remain</span>) ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hnext</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_strict</span> <span class="id" title="var">i'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_loop_strict</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">t</span> : <span class="id" title="var">Trace</span>, <span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">remain</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">n_merge_schedule_existence</span> <span class="id" title="var">lstrict</span> <span class="id" title="var">remain</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">n_merge_schedule_nonil_prop0</span> <span class="id" title="var">lstrict</span> ((<span class="id" title="var">a</span> :: <span class="id" title="var">t0</span>) :: <span class="id" title="var">remain</span>) (<span class="id" title="var">a</span> :: <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t_merge_remain</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t_merge_remain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">remain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">hypothese_de_tri_strict</span> <span class="id" title="var">t0</span> <span class="id" title="var">t</span> <span class="id" title="var">t_merge_remain</span> <span class="id" title="var">remain</span> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hr</span>:=<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">n_merge_schedule_cons_seq_prop</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrep</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n</span>,<span class="id" title="var">H</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t0</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">In</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t0</span>) <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">nth_In</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hnext</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lseq</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_loop_seq</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">t'</span> : <span class="id" title="var">Trace</span>, <span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lseq</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) <span class="id" title="var">t'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id" title="var">is_weak_seq</span> <span class="id" title="var">t0</span> <span class="id" title="var">t'</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">hypothese_de_tri_weak_seq</span> <span class="id" title="var">t0</span> <span class="id" title="var">t</span> <span class="id" title="var">subs</span> <span class="id" title="var">n</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H3</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">subs_remove_keep_in</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">In</span> (<span class="id" title="var">a</span>::<span class="id" title="var">nil</span>) <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">nth_In</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hnext</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_seq</span> <span class="id" title="var">i'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lseq</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_loop_seq</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">subs_remove_keep_in</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_seq_nil_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hr</span>:=<span class="id" title="var">Hrep</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">n_merge_schedule_cons_par_prop</span> <span class="id" title="var">subs</span> <span class="id" title="var">t</span> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hrep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrep</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n</span>,<span class="id" title="var">H</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t0</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">In</span> (<span class="id" title="var">a</span>::<span class="id" title="var">t0</span>) <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">nth_In</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hnext</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lpar</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_loop_par</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">t'</span> : <span class="id" title="var">Trace</span>, <span class="id" title="var">n_merge_schedule</span> <span class="id" title="var">lpar</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>) <span class="id" title="var">t'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id" title="var">is_interleaving</span> <span class="id" title="var">t0</span> <span class="id" title="var">t'</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<span class="id" title="var">hypothese_de_tri_interleaving</span> <span class="id" title="var">t0</span> <span class="id" title="var">t</span> <span class="id" title="var">subs</span> <span class="id" title="var">n</span>) ; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t2</span>,<span class="id" title="var">H3</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">subs_remove_keep_in</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+  <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">In</span> (<span class="id" title="var">a</span>::<span class="id" title="var">nil</span>) <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">nth_In</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hi'</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hnext</span>,<span class="id" title="var">Hi'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">interaction_par</span> <span class="id" title="var">i'</span> (<span class="id" title="var">interaction_loop</span> <span class="id" title="var">lpar</span> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">execute_loop_par</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nil</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">subs_remove</span> <span class="id" title="var">n</span> <span class="id" title="var">subs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">subs_remove_keep_in</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">interleaving_nil_left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can finally prove the inclusion of "sem_de" into "sem_op".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">de_implies_op</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">t</span> : <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>) -&gt; (<span class="id" title="var">sem_op</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>).<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="var">generalizing</span> <span class="id" title="var">i</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">sem_op_empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">de_accept_nil_implies_terminates</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">de_accept_cons_implies_execution_possible</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>,<span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">sem_op_event</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab34"></a><h1 class="section">Conclusion</h1>


<div class="paragraph"> </div>

Finally we have proven the equivalence of both semantics,
as stated by the "sem_equivalence" Theorem.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sem_equivalence</span> (<span class="id" title="var">i</span> : <span class="id" title="var">Interaction</span>) (<span class="id" title="var">t</span> : <span class="id" title="var">Trace</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">sem_op</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>) &lt;-&gt; (<span class="id" title="var">sem_de</span> <span class="id" title="var">i</span> <span class="id" title="var">t</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">op_implies_de</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="var">de_implies_op</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>